{"version":3,"file":"iframe.61f0ebea.js","sources":["../../vite/modulepreload-polyfill","../../.storybook/preview.js","../../src/TreeContext.tsx","../../src/TreeItem.tsx","../../src/TreeReducer.ts","../../src/Tree.tsx","../../../../../../virtual:/@storybook/builder-vite/vite-app.js"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","export const parameters = {\n  actions: { argTypesRegex: \"^on[A-Z].*\" },\n  controls: {\n    matchers: {\n      color: /(background|color)$/i,\n      date: /Date$/,\n    },\n  },\n}","import React from \"react\";\nimport { TreeStateMap } from \"./TreeReducer\";\n\nexport const TreeContext = React.createContext<{\n  stateMap: TreeStateMap;\n  focused: boolean;\n}>({ stateMap: {}, focused: false });\n","import cn from \"classnames\";\nimport React, { HTMLAttributes, useEffect, useContext, useRef } from \"react\";\nimport { TreeContext } from \"./TreeContext\";\n\nimport styles from \"./TreeItem.module.css\";\n\nexport interface TreeItemData {\n  label: string;\n  id: string;\n  children?: this[];\n}\n\n/** Computed states */\nexport interface TreeItemState {\n  highlighted?: boolean;\n  selected?: boolean;\n  expanded?: boolean;\n  hasChild?: boolean;\n  depth?: number;\n}\n\nexport interface TreeItemProps<T extends TreeItemData> // TreeItemState,\n  extends HTMLAttributes<HTMLDivElement> {\n  // expose `classes` to make styles customizable. Or not use css module\n  data: T; // Generics to make sure custom TreeItem can use more data\n  // itemComponent? ...\n  path: string;\n}\n\nexport const TreeItem = <T extends TreeItemData>({\n  data,\n  path,\n  ...restProps\n}: TreeItemProps<T>) => {\n  const { stateMap, focused } = useContext(TreeContext);\n  // console.log(path, treeState[path]);\n  const itemState = stateMap[path];\n  const { expanded, selected, depth = 0, highlighted } = itemState || {}; // {} when data is empty\n\n  const leafNode = !data.children?.length;\n  const icon = !leafNode ? (expanded ? \"▼\" : \"▶\") : null;\n  const itemRef = useRef<HTMLDivElement>(null);\n  useEffect(() => {\n    if (focused && highlighted && itemRef.current) {\n      console.log(\"focus item\", path);\n      itemRef.current.focus();\n    }\n  }, [highlighted, path, focused]);\n\n  // const handleClick = useCallback((e: MouseEvent<HTMLDivElement>) => {\n  //   setIsExpanded((x) => !x);\n  //   onClickProp?.(e);\n  // }, []);\n  if (itemState === undefined) {\n    return null;\n  }\n  return (\n    <div role=\"group\" {...restProps}>\n      <div\n        className={cn(styles.treeItem, {\n          [styles.treeItemHighlighted]: focused && highlighted,\n          [styles.treeItemSelected]: selected,\n          [styles.treeItemLeaf]: leafNode,\n        })}\n        role=\"treeitem\"\n        // Used in Tree callback to determine item\n        data-treeitem-path={path}\n        // Used in CSS to indent\n        data-treeitem-depth={depth}\n        data-treeitem-id={data.id}\n        // onClick={handleClick}\n        // Implement roving tabindex\n        tabIndex={highlighted ? 0 : -1}\n        ref={itemRef}\n      >\n        {icon}\n        {data.label}\n      </div>\n      {expanded && data.children\n        ? data.children.map((d, i) => (\n            <TreeItem\n              key={`${d.label}-${i}`}\n              data={d}\n              // depth={depth + 1}\n              path={`${path}-${i}`}\n            />\n          ))\n        : null}\n    </div>\n  );\n};\n","import { TreeItemData, TreeItemState } from \"./TreeItem\";\n\n\n/** item path map to each state */\nexport type TreeStateMap = {\n  [path: string]: TreeItemState;\n};\n\ntype State = {\n  stateMap: TreeStateMap;\n};\n\ntype Action = { type: \"click\"; path: string; } |\n{ type: \"keydown\"; path: string; key: string; } |\n{ type: 'initState'; data: TreeItemData[]; defaultExpanded?: boolean };\n\nexport function initState<T extends TreeItemData>(\n  data: T[],\n  defaultExpanded?: boolean\n): State {\n  const stateMap: TreeStateMap = {};\n  const innerLoopData = (x: T, i: number, depth: number, path: string) => {\n    const newPath = path + \"-\" + i.toString();\n    const newDepth = depth + 1;\n    const hasChild = Array.isArray(x.children) && x.children.length > 0;\n    stateMap[newPath] = {\n      highlighted: false,\n      selected: false,\n      expanded: hasChild && defaultExpanded,\n      hasChild,\n      depth: newDepth,\n    };\n    x.children?.forEach((child, index) => innerLoopData(child, index, newDepth, newPath));\n  };\n  const firstLoopData = (x: T, i: number) => {\n    const path = i.toString();\n    const hasChild = !!x.children?.length;\n    stateMap[path] = {\n      highlighted: i === 0,\n      selected: false,\n      expanded: hasChild && defaultExpanded,\n      hasChild,\n      depth: 0,\n    };\n    x.children?.forEach((child, index) => innerLoopData(child, index, 0, i.toString()));\n  };\n  data.forEach(firstLoopData);\n\n  return { stateMap };\n}\n\nconst selectNode = (stateMap: TreeStateMap, nodePath: string): TreeStateMap => {\n  const newStateMap: TreeStateMap = {};\n\n  Object.keys(stateMap).forEach(key => {\n    if (key === nodePath) {\n      const prevItemState = stateMap[key];\n      const newItemState = { ...prevItemState };\n      if (newItemState.hasChild) {\n        newItemState.expanded = !newItemState.expanded;\n      }\n      newItemState.selected = true\n      newItemState.highlighted = true\n      newStateMap[key] = newItemState\n    } else {\n      // Reset states for all other nodes\n      const prevItemState = stateMap[key];\n      const newItemState: TreeItemState = { ...prevItemState, selected: false, highlighted: false };\n      newStateMap[key] = newItemState\n    }\n  })\n\n  return newStateMap;\n}\n\nconst findNextVisibleNodePath = (stateMap: TreeStateMap, fromPath: string) => {\n  if (stateMap[fromPath].expanded) {\n    return fromPath + '-0';\n  } else {\n    // Example for the following, start with `fromPath` \"2-3-1\" -> [2, 3, 1]\n    const fromPathArray = fromPath.split('-').map(p => Number.parseInt(p));\n    while (fromPathArray.length > 0) {\n      // Remove the last index, i.e. 1, return it\n      const fromPathLastIndex = fromPathArray.splice(fromPathArray.length - 1, 1)[0];\n      // Compute next one at the same level, i.e. \"2-3-2\"\n      const nextPathInSameLevel = [...fromPathArray, (fromPathLastIndex + 1)].join('-')\n      // Check whether next one in the same level exist\n      if (stateMap[nextPathInSameLevel]) {\n        return nextPathInSameLevel;\n      }\n      // Doesn't exist, move up one level, continue loop\n    }\n  }\n  // return the current one if at the end\n  return fromPath;\n}\n\nconst hightlightNext = (stateMap: TreeStateMap, nodePath: string): TreeStateMap => {\n  const newStateMap: TreeStateMap = { ...stateMap };\n  const allPaths = Object.keys(stateMap).sort();\n  // console.log(\"hightlightNext\", allPaths)\n  if (nodePath === allPaths[allPaths.length - 1]) {\n    // do nothing at last item\n    return stateMap\n  }\n  const pathIndex = allPaths.indexOf(nodePath);\n  if (pathIndex < 0) {\n    console.error(nodePath, 'cannot be found in', allPaths);\n    return newStateMap;\n  }\n  const nextPath = findNextVisibleNodePath(stateMap, nodePath);\n\n  newStateMap[nodePath] = { ...newStateMap[nodePath], highlighted: false }\n  newStateMap[nextPath] = { ...newStateMap[nextPath], highlighted: true }\n\n  return newStateMap;\n}\n\nconst findPreviousVisibleNodePath = (stateMap: TreeStateMap, sortedAllPaths: string[], fromPath: string) => {\n  if (fromPath === '0') {\n    return '0';\n  }\n  const pathIndex = sortedAllPaths.indexOf(fromPath);\n  if (pathIndex < 0) {\n    return fromPath;\n  }\n  // This node might be hidden by its ancester \n  const potentialPreviousPath = sortedAllPaths[pathIndex - 1];\n  // Example \"2-3-1\" -> [2, 3, 1]\n  const potentialPathArray = potentialPreviousPath.split('-').map(p => Number.parseInt(p));\n\n  // start with '2'\n  let parentToCheck = potentialPathArray[0].toString();\n  // check all ancesters (hence -1 in for loop) whether expanded\n  for (let i = 0; i < potentialPathArray.length - 1; i++) {\n    if (!stateMap[parentToCheck].expanded) {\n      return parentToCheck\n    }\n    parentToCheck = `${parentToCheck}-${potentialPathArray[i + 1]}`\n  }\n  // if all ancester expanded, than this one is the visible\n  return potentialPreviousPath;\n}\n\nconst hightlightPrev = (stateMap: TreeStateMap, nodePath: string): TreeStateMap => {\n  const newStateMap: TreeStateMap = { ...stateMap };\n  const allPaths = Object.keys(stateMap).sort();\n  // console.log(\"hightlightPrev\", allPaths)\n  if (nodePath === allPaths[0]) {\n    // do nothing at first item\n    return stateMap\n  }\n  const pathIndex = allPaths.indexOf(nodePath);\n  if (pathIndex < 0) {\n    console.error(nodePath, 'cannot be found in', allPaths);\n    return newStateMap;\n  }\n\n  const prevPath = findPreviousVisibleNodePath(stateMap, allPaths, nodePath);\n\n  newStateMap[nodePath] = { ...newStateMap[nodePath], highlighted: false }\n  newStateMap[prevPath] = { ...newStateMap[prevPath], highlighted: true }\n\n  return newStateMap;\n}\n\nconst collapseNode = (stateMap: TreeStateMap, nodePath: string): TreeStateMap => {\n  const newStateMap: TreeStateMap = { ...stateMap };\n  newStateMap[nodePath] = { ...newStateMap[nodePath], expanded: false };\n  return newStateMap;\n}\n\nconst expandNode = (stateMap: TreeStateMap, nodePath: string): TreeStateMap => {\n  const newStateMap: TreeStateMap = { ...stateMap };\n  newStateMap[nodePath] = { ...newStateMap[nodePath], expanded: true };\n  return newStateMap;\n}\n\nconst findParentNodePath = (nodePath: string) => {\n  const fromPathArray = nodePath.split('-').map(p => Number.parseInt(p));\n  if (fromPathArray.length === 1) {\n    // return self as this is the highest level\n    return nodePath;\n  } else {\n    fromPathArray.splice(fromPathArray.length - 1, 1)[0];\n    return [...fromPathArray].join('-');\n  }\n}\n\nconst highlightParentNode = (stateMap: TreeStateMap, nodePath: string): TreeStateMap => {\n  const newStateMap: TreeStateMap = { ...stateMap };\n  const parentNodePath = findParentNodePath(nodePath);\n  newStateMap[nodePath] = { ...newStateMap[nodePath], highlighted: false };\n  newStateMap[parentNodePath] = { ...newStateMap[parentNodePath], highlighted: true };\n  return newStateMap;\n}\n\n\nconst highlightFirstChildNode = (stateMap: TreeStateMap, nodePath: string): TreeStateMap => {\n  const newStateMap: TreeStateMap = { ...stateMap };\n  const potentialFirstChildPath = nodePath + '-0';\n  if (newStateMap[potentialFirstChildPath] !== undefined) {\n    newStateMap[nodePath] = { ...newStateMap[nodePath], highlighted: false };\n    newStateMap[potentialFirstChildPath] = { ...newStateMap[potentialFirstChildPath], highlighted: true };\n  }\n  return newStateMap;\n}\n\n\n\nexport function reducer(state: State, action: Action): State {\n  // console.log(action);\n  switch (action.type) {\n    case \"click\": {\n      const newStateMap = selectNode(state.stateMap, action.path);\n\n      console.log('click reducer', { newStateMap });\n\n      return { stateMap: newStateMap };\n    }\n    case \"keydown\": {\n      if (action.key === 'Enter' || action.key === ' ') {\n        const newStateMap = selectNode(state.stateMap, action.path);\n        return { stateMap: newStateMap };\n      } else if (action.key === 'ArrowDown') {\n        const newStateMap = hightlightNext(state.stateMap, action.path);\n        return { stateMap: newStateMap };\n      } else if (action.key === 'ArrowUp') {\n        const newStateMap = hightlightPrev(state.stateMap, action.path);\n        return { stateMap: newStateMap };\n      } else if (action.key === 'ArrowLeft') {\n        if (state.stateMap[action.path].expanded) {\n          const newStateMap = collapseNode(state.stateMap, action.path);\n          return { stateMap: newStateMap };\n        } else {\n          // Leaf node or collapsed node\n          const newStateMap = highlightParentNode(state.stateMap, action.path);\n          return { stateMap: newStateMap };\n        }\n      } else if (action.key === 'ArrowRight') {\n        if (state.stateMap[action.path].hasChild) {\n          if (state.stateMap[action.path].expanded) {\n            const newStateMap = highlightFirstChildNode(state.stateMap, action.path);\n            return { stateMap: newStateMap };\n          } else {\n            const newStateMap = expandNode(state.stateMap, action.path);\n            return { stateMap: newStateMap };\n          }\n        }\n        // Do nothing at a leaf node\n      }\n      return state;\n    }\n    case \"initState\": {\n      console.log(\"new initState\")\n      return initState(action.data, action.defaultExpanded);\n    }\n  }\n}\n\n","import cn from \"classnames\";\nimport React, {\n  HTMLAttributes,\n  useReducer,\n  useCallback,\n  MouseEvent,\n  KeyboardEvent,\n  useEffect,\n  useState,\n  FocusEvent,\n} from \"react\";\nimport { TreeItem, TreeItemData } from \"./TreeItem\";\n\nimport styles from \"./Tree.module.css\";\nimport { initState, reducer } from \"./TreeReducer\";\nimport { TreeContext } from \"./TreeContext\";\nexport interface TreeProps<T extends TreeItemData = TreeItemData>\n  extends Omit<HTMLAttributes<HTMLDivElement>, \"onClick\" | \"onKeyDown\"> {\n  data: T[];\n  defaultExpanded?: boolean;\n  onClick?: (e: MouseEvent<HTMLDivElement>, itemId?: string) => void;\n  onKeyDown?: (e: KeyboardEvent<HTMLDivElement>, itemId?: string) => void;\n}\n\nexport const Tree = <T extends TreeItemData = TreeItemData>({\n  className,\n  data,\n  defaultExpanded,\n  onClick: onClickProp,\n  onKeyDown: onKeyDownProp,\n  onFocus: onFocusProp,\n  onBlur: onBlurProp,\n  ...restProps\n}: TreeProps<T>) => {\n  const [focused, setFocused] = useState(false);\n  const [{ stateMap }, dispatch] = useReducer(\n    reducer,\n    initState(data, defaultExpanded)\n  );\n  useEffect(() => {\n    dispatch({ type: \"initState\", data, defaultExpanded });\n  }, [data, defaultExpanded]);\n  const handleClick = useCallback(\n    (e: MouseEvent<HTMLDivElement>) => {\n      console.log(\"click\", (e.target as HTMLDivElement).dataset);\n      const treeitemPath = (e.target as HTMLDivElement).dataset.treeitemPath;\n      if (treeitemPath) {\n        dispatch({ type: \"click\", path: treeitemPath });\n      }\n      onClickProp?.(e, (e.target as HTMLDivElement).dataset.treeitemId);\n    },\n    [onClickProp]\n  );\n  const handleKeyDown = useCallback(\n    (e: KeyboardEvent<HTMLDivElement>) => {\n      if (e.key !== \"Tab\") {\n        e.preventDefault(); // so page won't scroll on arrow up and down\n      }\n      const dataset = (e.target as HTMLDivElement).dataset;\n      console.log(\"keydown\", dataset);\n      if (dataset.treeitemPath) {\n        dispatch({ type: \"keydown\", path: dataset.treeitemPath, key: e.key });\n      }\n      onKeyDownProp?.(e, (e.target as HTMLDivElement).dataset.treeitemId);\n    },\n    [onKeyDownProp]\n  );\n\n  const handleFocus = useCallback(\n    (e: FocusEvent<HTMLDivElement>) => {\n      setFocused(true);\n      onFocusProp?.(e);\n    },\n    [onFocusProp]\n  );\n  const handleBlur = useCallback(\n    (e: FocusEvent<HTMLDivElement>) => {\n      setFocused(false);\n      onBlurProp?.(e);\n    },\n    [onBlurProp]\n  );\n\n  console.log({ stateMap });\n\n  return (\n    <div\n      className={cn(className, styles.tree)}\n      role=\"tree\"\n      onClick={handleClick}\n      onKeyDown={handleKeyDown}\n      onFocus={handleFocus}\n      onBlur={handleBlur}\n      {...restProps}\n    >\n      <TreeContext.Provider value={{ stateMap, focused }}>\n        {data.map((x, i) => (\n          <TreeItem key={`${x.label}-${i}`} data={x} path={i.toString()} />\n        ))}\n      </TreeContext.Provider>\n    </div>\n  );\n};\n","import { configure } from '@storybook/react';\n    /* // preview entry\nimport '/Users/zhihaocui/Projects/zc-tree/node_modules/@storybook/core-client/dist/esm/globals/polyfills.js';\n// preview entry\nimport '/Users/zhihaocui/Projects/zc-tree/node_modules/@storybook/core-client/dist/esm/globals/globals.js'; */\n\n    import {\n      addDecorator,\n      addParameters,\n      addLoader,\n      addArgTypesEnhancer,\n      addArgsEnhancer\n    } from '@storybook/client-api';\n    import { logger } from '@storybook/client-logger';\n    import * as config_0 from '/@fs//Users/zhihaocui/Projects/zc-tree/node_modules/@storybook/addon-docs/dist/esm/frameworks/common/config.js'\nimport * as config_1 from '/@fs//Users/zhihaocui/Projects/zc-tree/node_modules/@storybook/addon-docs/dist/esm/frameworks/react/config.js'\nimport * as config_2 from '/@fs//Users/zhihaocui/Projects/zc-tree/node_modules/@storybook/react/dist/esm/client/preview/config'\nimport * as config_3 from '/@fs//Users/zhihaocui/Projects/zc-tree/node_modules/@storybook/addon-links/dist/esm/preset/addDecorator.js'\nimport * as config_4 from '/@fs//Users/zhihaocui/Projects/zc-tree/node_modules/@storybook/addon-actions/dist/esm/preset/addDecorator.js'\nimport * as config_5 from '/@fs//Users/zhihaocui/Projects/zc-tree/node_modules/@storybook/addon-actions/dist/esm/preset/addArgs.js'\nimport * as config_6 from '/@fs//Users/zhihaocui/Projects/zc-tree/node_modules/@storybook/addon-backgrounds/dist/esm/preset/addDecorator.js'\nimport * as config_7 from '/@fs//Users/zhihaocui/Projects/zc-tree/node_modules/@storybook/addon-backgrounds/dist/esm/preset/addParameter.js'\nimport * as config_8 from '/@fs//Users/zhihaocui/Projects/zc-tree/node_modules/@storybook/addon-measure/dist/esm/preset/addDecorator.js'\nimport * as config_9 from '/@fs//Users/zhihaocui/Projects/zc-tree/node_modules/@storybook/addon-outline/dist/esm/preset/addDecorator.js'\nimport * as config_10 from '/@fs//Users/zhihaocui/Projects/zc-tree/.storybook/preview.js'\n    import * as story_0 from '/@fs//Users/zhihaocui/Projects/zc-tree/src/Tree.stories.tsx'\n      \n    const configs = [config_0,config_1,config_2,config_3,config_4,config_5,config_6,config_7,config_8,config_9,config_10]\n    configs.forEach(config => {\n      Object.keys(config).forEach((key) => {\n        const value = config[key];\n        switch (key) {\n          case 'args':\n          case 'argTypes': {\n            return logger.warn('Invalid args/argTypes in config, ignoring.', JSON.stringify(value));\n          }\n          case 'decorators': {\n            return value.forEach((decorator) => addDecorator(decorator, false));\n          }\n          case 'loaders': {\n            return value.forEach((loader) => addLoader(loader, false));\n          }\n          case 'parameters': {\n            return addParameters({ ...value }, false);\n          }\n          case 'argTypesEnhancers': {\n            return value.forEach((enhancer) => addArgTypesEnhancer(enhancer));\n          }\n          case 'argsEnhancers': {\n            return value.forEach((enhancer) => addArgsEnhancer(enhancer))\n          }\n          case 'globals':\n          case 'globalTypes': {\n            const v = {};\n            v[key] = value;\n            return addParameters(v, false);\n          }\n          case 'decorateStory':\n          case 'renderToDOM': {\n            return null; // This key is not handled directly in v6 mode.\n          }\n          default: {\n            // eslint-disable-next-line prefer-template\n            return console.log(key + ' was not supported :( !');\n          }\n        }\n      });\n    })\n    \n    /* TODO: not quite sure what to do with this, to fix HMR\n    if (import.meta.hot) {\n        import.meta.hot.accept();    \n    }\n    */\n    \n    function loadable(key) {\n      return {\"/Users/zhihaocui/Projects/zc-tree/src/Tree.stories.tsx\": story_0}[key];\n    }\n    \n    Object.assign(loadable, {\n      keys: () => ([\"/Users/zhihaocui/Projects/zc-tree/src/Tree.stories.tsx\"]),\n      resolve: (key) => ({\"/Users/zhihaocui/Projects/zc-tree/src/Tree.stories.tsx\":\"./src/Tree.stories.tsx\"}[key])\n    });\n    \n    configure(loadable, { hot: import.meta.hot }, false); // not sure if the import.meta.hot thing is correct"],"names":["TreeContext","React","createContext","stateMap","focused","TreeItem","data","path","restProps","useContext","itemState","expanded","selected","depth","highlighted","leafNode","children","length","icon","itemRef","useRef","current","log","focus","undefined","cn","styles","treeItem","treeItemHighlighted","treeItemSelected","treeItemLeaf","id","label","map","d","i","Tree","className","defaultExpanded","onClick","onClickProp","onKeyDown","onKeyDownProp","onFocus","onFocusProp","onBlur","onBlurProp","setFocused","useState","dispatch","useReducer","reducer","initState","type","handleClick","useCallback","e","target","dataset","treeitemPath","treeitemId","handleKeyDown","key","preventDefault","handleFocus","handleBlur","tree","x","toString"],"mappings":"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"}