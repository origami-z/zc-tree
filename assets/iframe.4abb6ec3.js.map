{"version":3,"file":"iframe.4abb6ec3.js","sources":["../../vite/modulepreload-polyfill","../../.storybook/preview.js","../../src/TreeContext.tsx","../../src/TreeItem.tsx","../../src/TreeReducer.ts","../../src/Tree.tsx","../../../../../../virtual:/@storybook/builder-vite/vite-app.js"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","export const parameters = {\n  actions: { argTypesRegex: \"^on[A-Z].*\" },\n  controls: {\n    matchers: {\n      color: /(background|color)$/i,\n      date: /Date$/,\n    },\n  },\n}","import React, { ForwardRefExoticComponent } from \"react\";\nimport { TreeStateMap } from \"./TreeReducer\";\n\nexport const TreeContext = React.createContext<{\n  stateMap: TreeStateMap;\n  focused: boolean;\n  TreeItemNode?: ForwardRefExoticComponent<any>;\n  onItemSelected?: (itemId: string) => void;\n}>({ stateMap: {}, focused: false });\n","import cn from \"classnames\";\nimport React, {\n  HTMLAttributes,\n  useEffect,\n  useContext,\n  useRef,\n  ForwardedRef,\n  forwardRef,\n} from \"react\";\nimport { TreeContext } from \"./TreeContext\";\n\nimport styles from \"./TreeItem.module.css\";\n\nexport interface TreeItemData {\n  label: string;\n  id: string;\n  children?: this[];\n}\n\n/** Computed states */\nexport interface TreeItemState {\n  highlighted?: boolean;\n  selected?: boolean;\n  expanded?: boolean;\n  hasChild?: boolean;\n  depth?: number;\n}\n\nexport interface BasicTreeItemNodeProps<T extends TreeItemData>\n  extends TreeItemState,\n    HTMLAttributes<HTMLDivElement> {\n  data: T;\n  treeFocused?: boolean;\n}\n\nconst BasicTreeItemNodeBase = <T extends TreeItemData>(\n  {\n    highlighted,\n    selected,\n    expanded,\n    hasChild,\n    depth,\n    data,\n    treeFocused,\n    ...restProps\n  }: BasicTreeItemNodeProps<T>,\n  ref: ForwardedRef<HTMLDivElement>\n) => {\n  const leafNode = !data.children?.length;\n  const icon = !leafNode ? (expanded ? \"▼\" : \"▶\") : null;\n\n  return (\n    <div\n      className={cn(styles.treeItem, {\n        [styles.treeItemHighlighted]: highlighted && treeFocused,\n        [styles.treeItemSelected]: selected,\n        [styles.treeItemLeaf]: leafNode,\n      })}\n      {...restProps}\n      ref={ref}\n    >\n      {icon}\n      {data.label}\n    </div>\n  );\n};\n\nexport const BasicTreeItemNode = forwardRef(BasicTreeItemNodeBase);\nBasicTreeItemNode.displayName = \"BasicTreeItemNode\";\n\nexport interface TreeItemProps<T extends TreeItemData> // TreeItemState,\n  extends HTMLAttributes<HTMLDivElement> {\n  // expose `classes` to make styles customizable. Or not use css module\n  data: T; // Generics to make sure custom TreeItem can use more data\n  // itemComponent? ...\n  path: string;\n}\n\nexport const TreeItem = <T extends TreeItemData>({\n  data,\n  path,\n  ...restProps\n}: TreeItemProps<T>) => {\n  const {\n    stateMap,\n    focused,\n    TreeItemNode = BasicTreeItemNode,\n    onItemSelected,\n  } = useContext(TreeContext);\n  const itemState = stateMap[path];\n  const { expanded, selected, depth = 0, highlighted } = itemState || {}; // {} when data is empty\n\n  const itemRef = useRef<HTMLDivElement>(null);\n  useEffect(() => {\n    if (focused && highlighted && itemRef.current) {\n      console.log(\"focus item\", path);\n      itemRef.current.focus();\n    }\n  }, [highlighted, path, focused]);\n  useEffect(() => {\n    if (selected) {\n      onItemSelected?.(data.id);\n    }\n  }, [data.id, onItemSelected, selected]);\n\n  if (itemState === undefined) {\n    console.warn(\"item null\", itemState, path);\n    return null;\n  }\n  return (\n    <div role=\"group\" {...restProps}>\n      <TreeItemNode\n        treeFocused={focused}\n        data={data}\n        {...itemState}\n        role=\"treeitem\"\n        // Used in Tree callback to determine item\n        data-treeitem-path={path}\n        // Used in CSS to indent\n        data-treeitem-depth={depth}\n        data-treeitem-id={data.id}\n        // onClick={handleClick}\n        // Implement roving tabindex\n        tabIndex={highlighted ? 0 : -1}\n        ref={itemRef}\n      />\n      {expanded && data.children\n        ? data.children.map((d, i) => (\n            <TreeItem\n              key={`${d.label}-${i}`}\n              data={d}\n              // depth={depth + 1}\n              path={`${path}-${i}`}\n            />\n          ))\n        : null}\n    </div>\n  );\n};\n","import { TreeItemData, TreeItemState } from \"./TreeItem\";\n\n\n/** item path map to each state */\nexport type TreeStateMap = {\n  [path: string]: TreeItemState;\n};\n\ntype State = {\n  stateMap: TreeStateMap;\n};\n\ntype Action = { type: \"click\"; path: string; } |\n{ type: \"keydown\"; path: string; key: string; } |\n{ type: \"updateData\"; data: TreeItemData[]; defaultExpanded?: boolean };\n\nexport function initState<T extends TreeItemData>(\n  data: T[],\n  defaultExpanded?: boolean\n): State {\n  const stateMap: TreeStateMap = {};\n  const innerLoopData = (x: T, i: number, depth: number, path: string) => {\n    const newPath = path + \"-\" + i.toString();\n    const newDepth = depth + 1;\n    const hasChild = Array.isArray(x.children) && x.children.length > 0;\n    stateMap[newPath] = {\n      highlighted: false,\n      selected: false,\n      expanded: hasChild && defaultExpanded,\n      hasChild,\n      depth: newDepth,\n    };\n    x.children?.forEach((child, index) => innerLoopData(child, index, newDepth, newPath));\n  };\n  const firstLoopData = (x: T, i: number) => {\n    const path = i.toString();\n    const hasChild = !!x.children?.length;\n    stateMap[path] = {\n      // Make first element of the first root node default to be highlighted\n      highlighted: i === 0,\n      selected: false,\n      expanded: hasChild && defaultExpanded,\n      hasChild,\n      depth: 0,\n    };\n    x.children?.forEach((child, index) => innerLoopData(child, index, 0, i.toString()));\n  };\n  data.forEach(firstLoopData);\n\n  return { stateMap };\n}\n\nconst selectNode = (stateMap: TreeStateMap, nodePath: string): TreeStateMap => {\n  const newStateMap: TreeStateMap = {};\n\n  Object.keys(stateMap).forEach(key => {\n    if (key === nodePath) {\n      const prevItemState = stateMap[key];\n      const newItemState = { ...prevItemState };\n      if (newItemState.hasChild) {\n        newItemState.expanded = !newItemState.expanded;\n      }\n      newItemState.selected = true\n      newItemState.highlighted = true\n      newStateMap[key] = newItemState\n    } else {\n      // Reset states for all other nodes\n      const prevItemState = stateMap[key];\n      const newItemState: TreeItemState = { ...prevItemState, selected: false, highlighted: false };\n      newStateMap[key] = newItemState\n    }\n  })\n\n  return newStateMap;\n}\n\nconst findNextVisibleNodePath = (stateMap: TreeStateMap, fromPath: string) => {\n  if (stateMap[fromPath].expanded) {\n    return fromPath + '-0';\n  } else {\n    // Example for the following, start with `fromPath` \"2-3-1\" -> [2, 3, 1]\n    const fromPathArray = fromPath.split('-').map(p => Number.parseInt(p));\n    while (fromPathArray.length > 0) {\n      // Remove the last index, i.e. 1, return it\n      const fromPathLastIndex = fromPathArray.splice(fromPathArray.length - 1, 1)[0];\n      // Compute next one at the same level, i.e. \"2-3-2\"\n      const nextPathInSameLevel = [...fromPathArray, (fromPathLastIndex + 1)].join('-')\n      // Check whether next one in the same level exist\n      if (stateMap[nextPathInSameLevel]) {\n        return nextPathInSameLevel;\n      }\n      // Doesn't exist, move up one level, continue loop\n    }\n  }\n  // return the current one if at the end\n  return fromPath;\n}\n\nconst hightlightNext = (stateMap: TreeStateMap, nodePath: string): TreeStateMap => {\n  const newStateMap: TreeStateMap = { ...stateMap };\n  const allPaths = Object.keys(stateMap).sort();\n  // console.log(\"hightlightNext\", allPaths)\n  if (nodePath === allPaths[allPaths.length - 1]) {\n    // do nothing at last item\n    return stateMap\n  }\n  const pathIndex = allPaths.indexOf(nodePath);\n  if (pathIndex < 0) {\n    console.error(nodePath, 'cannot be found in', allPaths);\n    return newStateMap;\n  }\n  const nextPath = findNextVisibleNodePath(stateMap, nodePath);\n\n  newStateMap[nodePath] = { ...newStateMap[nodePath], highlighted: false }\n  newStateMap[nextPath] = { ...newStateMap[nextPath], highlighted: true }\n\n  return newStateMap;\n}\n\nconst findPreviousVisibleNodePath = (stateMap: TreeStateMap, sortedAllPaths: string[], fromPath: string) => {\n  if (fromPath === '0') {\n    return '0';\n  }\n  const pathIndex = sortedAllPaths.indexOf(fromPath);\n  if (pathIndex < 0) {\n    return fromPath;\n  }\n  // This node might be hidden by its ancester \n  const potentialPreviousPath = sortedAllPaths[pathIndex - 1];\n  // Example \"2-3-1\" -> [2, 3, 1]\n  const potentialPathArray = potentialPreviousPath.split('-').map(p => Number.parseInt(p));\n\n  // start with '2'\n  let parentToCheck = potentialPathArray[0].toString();\n  // check all ancesters (hence -1 in for loop) whether expanded\n  for (let i = 0; i < potentialPathArray.length - 1; i++) {\n    if (!stateMap[parentToCheck].expanded) {\n      return parentToCheck\n    }\n    parentToCheck = `${parentToCheck}-${potentialPathArray[i + 1]}`\n  }\n  // if all ancester expanded, than this one is the visible\n  return potentialPreviousPath;\n}\n\nconst hightlightPrev = (stateMap: TreeStateMap, nodePath: string): TreeStateMap => {\n  const newStateMap: TreeStateMap = { ...stateMap };\n  const allPaths = Object.keys(stateMap).sort();\n  // console.log(\"hightlightPrev\", allPaths)\n  if (nodePath === allPaths[0]) {\n    // do nothing at first item\n    return stateMap\n  }\n  const pathIndex = allPaths.indexOf(nodePath);\n  if (pathIndex < 0) {\n    console.error(nodePath, 'cannot be found in', allPaths);\n    return newStateMap;\n  }\n\n  const prevPath = findPreviousVisibleNodePath(stateMap, allPaths, nodePath);\n\n  newStateMap[nodePath] = { ...newStateMap[nodePath], highlighted: false }\n  newStateMap[prevPath] = { ...newStateMap[prevPath], highlighted: true }\n\n  return newStateMap;\n}\n\nconst collapseNode = (stateMap: TreeStateMap, nodePath: string): TreeStateMap => {\n  const newStateMap: TreeStateMap = { ...stateMap };\n  newStateMap[nodePath] = { ...newStateMap[nodePath], expanded: false };\n  return newStateMap;\n}\n\nconst expandNode = (stateMap: TreeStateMap, nodePath: string): TreeStateMap => {\n  const newStateMap: TreeStateMap = { ...stateMap };\n  newStateMap[nodePath] = { ...newStateMap[nodePath], expanded: true };\n  return newStateMap;\n}\n\nconst findParentNodePath = (nodePath: string) => {\n  const fromPathArray = nodePath.split('-').map(p => Number.parseInt(p));\n  if (fromPathArray.length === 1) {\n    // return self as this is the highest level\n    return nodePath;\n  } else {\n    fromPathArray.splice(fromPathArray.length - 1, 1)[0];\n    return [...fromPathArray].join('-');\n  }\n}\n\nconst highlightParentNode = (stateMap: TreeStateMap, nodePath: string): TreeStateMap => {\n  const newStateMap: TreeStateMap = { ...stateMap };\n  const parentNodePath = findParentNodePath(nodePath);\n  newStateMap[nodePath] = { ...newStateMap[nodePath], highlighted: false };\n  newStateMap[parentNodePath] = { ...newStateMap[parentNodePath], highlighted: true };\n  return newStateMap;\n}\n\n\nconst highlightFirstChildNode = (stateMap: TreeStateMap, nodePath: string): TreeStateMap => {\n  const newStateMap: TreeStateMap = { ...stateMap };\n  const potentialFirstChildPath = nodePath + '-0';\n  if (newStateMap[potentialFirstChildPath] !== undefined) {\n    newStateMap[nodePath] = { ...newStateMap[nodePath], highlighted: false };\n    newStateMap[potentialFirstChildPath] = { ...newStateMap[potentialFirstChildPath], highlighted: true };\n  }\n  return newStateMap;\n}\n\nconst updateData = <T extends TreeItemData>(\n  stateMap: TreeStateMap,\n  newData: T[]\n): TreeStateMap => {\n  const newStateMap: TreeStateMap = {};\n\n  const loopData = (x: T, i: number, depth: number, path: string) => {\n    const newPath = depth < 0 ? i.toString() : path + \"-\" + i.toString();\n    const newDepth = depth + 1;\n    const hasChild = Array.isArray(x.children) && x.children.length > 0;\n    newStateMap[newPath] = {\n      ...stateMap[newPath], // Keep existing states like highlight and selected\n      hasChild,\n      depth: newDepth,\n    };\n    x.children?.forEach((child, index) =>\n      loopData(child, index, newDepth, newPath)\n    );\n  };\n  newData.forEach((child, index) => loopData(child, index, -1, \"\"));\n  return newStateMap;\n};\n\nexport function reducer(state: State, action: Action): State {\n  // console.log(action);\n  switch (action.type) {\n    case \"click\": {\n      const newStateMap = selectNode(state.stateMap, action.path);\n\n      console.log('click reducer', { newStateMap });\n\n      return { stateMap: newStateMap };\n    }\n    case \"keydown\": {\n      if (action.key === 'Enter' || action.key === ' ') {\n        const newStateMap = selectNode(state.stateMap, action.path);\n        return { stateMap: newStateMap };\n      } else if (action.key === 'ArrowDown') {\n        const newStateMap = hightlightNext(state.stateMap, action.path);\n        return { stateMap: newStateMap };\n      } else if (action.key === 'ArrowUp') {\n        const newStateMap = hightlightPrev(state.stateMap, action.path);\n        return { stateMap: newStateMap };\n      } else if (action.key === 'ArrowLeft') {\n        if (state.stateMap[action.path].expanded) {\n          const newStateMap = collapseNode(state.stateMap, action.path);\n          return { stateMap: newStateMap };\n        } else {\n          // Leaf node or collapsed node\n          const newStateMap = highlightParentNode(state.stateMap, action.path);\n          return { stateMap: newStateMap };\n        }\n      } else if (action.key === 'ArrowRight') {\n        if (state.stateMap[action.path].hasChild) {\n          if (state.stateMap[action.path].expanded) {\n            const newStateMap = highlightFirstChildNode(state.stateMap, action.path);\n            return { stateMap: newStateMap };\n          } else {\n            const newStateMap = expandNode(state.stateMap, action.path);\n            return { stateMap: newStateMap };\n          }\n        }\n        // Do nothing at a leaf node\n      }\n      return state;\n    }\n    case \"updateData\": {\n      // console.log(\"reducer updateData\");\n      return { stateMap: updateData(state.stateMap, action.data) };\n    }\n  }\n}\n\n","import cn from \"classnames\";\nimport React, {\n  HTMLAttributes,\n  useReducer,\n  useCallback,\n  MouseEvent,\n  KeyboardEvent,\n  useEffect,\n  useState,\n  FocusEvent,\n  ForwardRefExoticComponent,\n} from \"react\";\nimport { TreeItem, TreeItemData } from \"./TreeItem\";\n\nimport styles from \"./Tree.module.css\";\nimport { initState, reducer } from \"./TreeReducer\";\nimport { TreeContext } from \"./TreeContext\";\nexport interface TreeProps<T extends TreeItemData = TreeItemData>\n  extends Omit<HTMLAttributes<HTMLDivElement>, \"onClick\" | \"onKeyDown\"> {\n  data: T[];\n  defaultExpanded?: boolean;\n  onClick?: (e: MouseEvent<HTMLDivElement>, itemId?: string) => void;\n  onKeyDown?: (e: KeyboardEvent<HTMLDivElement>, itemId?: string) => void;\n  // TODO: move `any` to use generics based on `TreeItemData`\n  TreeItemNode?: ForwardRefExoticComponent<any>;\n  onItemSelected?: (itemId: string) => void;\n}\n\nexport const Tree = <T extends TreeItemData = TreeItemData>({\n  className,\n  data,\n  defaultExpanded,\n  onClick: onClickProp,\n  onKeyDown: onKeyDownProp,\n  onFocus: onFocusProp,\n  onBlur: onBlurProp,\n  TreeItemNode,\n  onItemSelected,\n  ...restProps\n}: TreeProps<T>) => {\n  const [focused, setFocused] = useState(false);\n  const [{ stateMap }, dispatch] = useReducer(\n    reducer,\n    initState(data, defaultExpanded)\n  );\n  useEffect(() => {\n    dispatch({ type: \"updateData\", data });\n  }, [data, defaultExpanded]);\n  const handleClick = useCallback(\n    (e: MouseEvent<HTMLDivElement>) => {\n      console.log(\"click\", (e.target as HTMLDivElement).dataset);\n      const treeitemPath = (e.target as HTMLDivElement).dataset.treeitemPath;\n      if (treeitemPath) {\n        dispatch({ type: \"click\", path: treeitemPath });\n      }\n      onClickProp?.(e, (e.target as HTMLDivElement).dataset.treeitemId);\n    },\n    [onClickProp]\n  );\n  const handleKeyDown = useCallback(\n    (e: KeyboardEvent<HTMLDivElement>) => {\n      if (e.key !== \"Tab\") {\n        e.preventDefault(); // so page won't scroll on arrow up and down\n      }\n      const dataset = (e.target as HTMLDivElement).dataset;\n      console.log(\"keydown\", dataset);\n      if (dataset.treeitemPath) {\n        dispatch({ type: \"keydown\", path: dataset.treeitemPath, key: e.key });\n      }\n      onKeyDownProp?.(e, (e.target as HTMLDivElement).dataset.treeitemId);\n    },\n    [onKeyDownProp]\n  );\n\n  const handleFocus = useCallback(\n    (e: FocusEvent<HTMLDivElement>) => {\n      setFocused(true);\n      onFocusProp?.(e);\n    },\n    [onFocusProp]\n  );\n  const handleBlur = useCallback(\n    (e: FocusEvent<HTMLDivElement>) => {\n      setFocused(false);\n      onBlurProp?.(e);\n    },\n    [onBlurProp]\n  );\n\n  console.log({ stateMap });\n\n  return (\n    <div\n      className={cn(className, styles.tree)}\n      role=\"tree\"\n      onClick={handleClick}\n      onKeyDown={handleKeyDown}\n      onFocus={handleFocus}\n      onBlur={handleBlur}\n      {...restProps}\n    >\n      <TreeContext.Provider\n        value={{ stateMap, focused, TreeItemNode, onItemSelected }}\n      >\n        {data.map((x, i) => (\n          <TreeItem key={`${x.label}-${i}`} data={x} path={i.toString()} />\n        ))}\n      </TreeContext.Provider>\n    </div>\n  );\n};\n","import { configure } from '@storybook/react';\n    /* // preview entry\nimport '/Users/zhihaocui/Projects/zc-tree/node_modules/@storybook/core-client/dist/esm/globals/polyfills.js';\n// preview entry\nimport '/Users/zhihaocui/Projects/zc-tree/node_modules/@storybook/core-client/dist/esm/globals/globals.js'; */\n\n    import {\n      addDecorator,\n      addParameters,\n      addLoader,\n      addArgTypesEnhancer,\n      addArgsEnhancer\n    } from '@storybook/client-api';\n    import { logger } from '@storybook/client-logger';\n    import * as config_0 from '/@fs//Users/zhihaocui/Projects/zc-tree/node_modules/@storybook/addon-docs/dist/esm/frameworks/common/config.js'\nimport * as config_1 from '/@fs//Users/zhihaocui/Projects/zc-tree/node_modules/@storybook/addon-docs/dist/esm/frameworks/react/config.js'\nimport * as config_2 from '/@fs//Users/zhihaocui/Projects/zc-tree/node_modules/@storybook/react/dist/esm/client/preview/config'\nimport * as config_3 from '/@fs//Users/zhihaocui/Projects/zc-tree/node_modules/@storybook/addon-links/dist/esm/preset/addDecorator.js'\nimport * as config_4 from '/@fs//Users/zhihaocui/Projects/zc-tree/node_modules/@storybook/addon-actions/dist/esm/preset/addDecorator.js'\nimport * as config_5 from '/@fs//Users/zhihaocui/Projects/zc-tree/node_modules/@storybook/addon-actions/dist/esm/preset/addArgs.js'\nimport * as config_6 from '/@fs//Users/zhihaocui/Projects/zc-tree/node_modules/@storybook/addon-backgrounds/dist/esm/preset/addDecorator.js'\nimport * as config_7 from '/@fs//Users/zhihaocui/Projects/zc-tree/node_modules/@storybook/addon-backgrounds/dist/esm/preset/addParameter.js'\nimport * as config_8 from '/@fs//Users/zhihaocui/Projects/zc-tree/node_modules/@storybook/addon-measure/dist/esm/preset/addDecorator.js'\nimport * as config_9 from '/@fs//Users/zhihaocui/Projects/zc-tree/node_modules/@storybook/addon-outline/dist/esm/preset/addDecorator.js'\nimport * as config_10 from '/@fs//Users/zhihaocui/Projects/zc-tree/.storybook/preview.js'\n    import * as story_0 from '/@fs//Users/zhihaocui/Projects/zc-tree/src/Tree.stories.tsx'\n      \n    const configs = [config_0,config_1,config_2,config_3,config_4,config_5,config_6,config_7,config_8,config_9,config_10]\n    configs.forEach(config => {\n      Object.keys(config).forEach((key) => {\n        const value = config[key];\n        switch (key) {\n          case 'args':\n          case 'argTypes': {\n            return logger.warn('Invalid args/argTypes in config, ignoring.', JSON.stringify(value));\n          }\n          case 'decorators': {\n            return value.forEach((decorator) => addDecorator(decorator, false));\n          }\n          case 'loaders': {\n            return value.forEach((loader) => addLoader(loader, false));\n          }\n          case 'parameters': {\n            return addParameters({ ...value }, false);\n          }\n          case 'argTypesEnhancers': {\n            return value.forEach((enhancer) => addArgTypesEnhancer(enhancer));\n          }\n          case 'argsEnhancers': {\n            return value.forEach((enhancer) => addArgsEnhancer(enhancer))\n          }\n          case 'globals':\n          case 'globalTypes': {\n            const v = {};\n            v[key] = value;\n            return addParameters(v, false);\n          }\n          case 'decorateStory':\n          case 'renderToDOM': {\n            return null; // This key is not handled directly in v6 mode.\n          }\n          default: {\n            // eslint-disable-next-line prefer-template\n            return console.log(key + ' was not supported :( !');\n          }\n        }\n      });\n    })\n    \n    /* TODO: not quite sure what to do with this, to fix HMR\n    if (import.meta.hot) {\n        import.meta.hot.accept();    \n    }\n    */\n    \n    function loadable(key) {\n      return {\"/Users/zhihaocui/Projects/zc-tree/src/Tree.stories.tsx\": story_0}[key];\n    }\n    \n    Object.assign(loadable, {\n      keys: () => ([\"/Users/zhihaocui/Projects/zc-tree/src/Tree.stories.tsx\"]),\n      resolve: (key) => ({\"/Users/zhihaocui/Projects/zc-tree/src/Tree.stories.tsx\":\"./src/Tree.stories.tsx\"}[key])\n    });\n    \n    configure(loadable, { hot: import.meta.hot }, false); // not sure if the import.meta.hot thing is correct"],"names":["TreeContext","React","createContext","stateMap","focused","BasicTreeItemNodeBase","ref","highlighted","selected","expanded","hasChild","depth","data","treeFocused","restProps","leafNode","children","length","icon","cn","styles","treeItem","treeItemHighlighted","treeItemSelected","treeItemLeaf","label","BasicTreeItemNode","forwardRef","displayName","TreeItem","path","TreeItemNode","onItemSelected","useContext","itemState","itemRef","useRef","current","log","focus","id","undefined","warn","map","d","i","Tree","className","defaultExpanded","onClick","onClickProp","onKeyDown","onKeyDownProp","onFocus","onFocusProp","onBlur","onBlurProp","setFocused","useState","dispatch","useReducer","reducer","initState","type","handleClick","useCallback","e","target","dataset","treeitemPath","treeitemId","handleKeyDown","key","preventDefault","handleFocus","handleBlur","tree","x","toString"],"mappings":"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"}